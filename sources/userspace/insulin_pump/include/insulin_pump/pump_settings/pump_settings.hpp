// ---------------------------------------------------------------------------------------------------------------------
/// \file pump_settings.hpp
/// \date 22. 03. 2025
/// \author Jaroslav Rosa (rosajaro1352@gmail.com)
///
/// \brief This file defines a class of Insulin Pump
// ---------------------------------------------------------------------------------------------------------------------

#pragma once

// STL imports (excluded from Doxygen)
/// \cond
//#include <cstdint>
/// \endcond

// Project file imports

#include "../../../include/insulin_pump/basal/basal_profile.hpp"
#include "../../../include/insulin_pump/definitions/definitions.hpp"

enum settings_state {
	Basal = 0, ///< 
	BasalValue = 1, ///< 
	BasalTime = 2, ///< 
	BolusValue = 3, ///< 
	Action_Required = 4 ///< 
};

const char* Settings_State_To_String(settings_state state);

struct pump_setting {
	settings_state m_state;				///< 
	basal_profile m_basal_profile;		///< 
	basal_profile m_temp_basal_profile; ///< 
	float m_bolus_value;				///< 
	float m_temp_bolus_value;			///< 
};

// -------------------------------------------------------------------------------------------------------------
/// \brief Initializes the pump settings
///
/// 
///
// -------------------------------------------------------------------------------------------------------------
pump_setting Initialize_Pump_Settings();

// -------------------------------------------------------------------------------------------------------------
/// \brief Runs the pump
///
/// 
///
// -------------------------------------------------------------------------------------------------------------
void Reset(pump_setting& settings);

// -------------------------------------------------------------------------------------------------------------
/// \brief Runs the pump
///
/// 
///
// -------------------------------------------------------------------------------------------------------------
settings_state Get_State(pump_setting settings);

// -------------------------------------------------------------------------------------------------------------
/// \brief Runs the pump
///
/// 
///
// -------------------------------------------------------------------------------------------------------------
void Set_Next_State(pump_setting& settings);

// -------------------------------------------------------------------------------------------------------------
/// \brief Runs the pump
///
/// 
///
// -------------------------------------------------------------------------------------------------------------
basal_profile Get_Basal_Profile(pump_setting settings);

// -------------------------------------------------------------------------------------------------------------
/// \brief Runs the pump
///
/// 
///
// -------------------------------------------------------------------------------------------------------------
void Set_Basal_Profile(pump_setting& settings, basal_profile bprofile);

// -------------------------------------------------------------------------------------------------------------
/// \brief Runs the pump
///
/// 
///
// -------------------------------------------------------------------------------------------------------------
basal_profile Get_Temp_Basal_Profile(pump_setting settings);

// -------------------------------------------------------------------------------------------------------------
/// \brief Runs the pump
///
/// 
///
// -------------------------------------------------------------------------------------------------------------
void Set_Temp_Basal_Profile(pump_setting& settings, basal_profile profile);


// -------------------------------------------------------------------------------------------------------------
/// \brief Runs the pump
///
/// 
///
// -------------------------------------------------------------------------------------------------------------
float Get_Bolus_Value(pump_setting settings);

// -------------------------------------------------------------------------------------------------------------
/// \brief Runs the pump
///
/// 
///
// -------------------------------------------------------------------------------------------------------------
void Set_Bolus_Value(pump_setting& settings, const float& value);

// -------------------------------------------------------------------------------------------------------------
/// \brief Runs the pump
///
/// 
///
// -------------------------------------------------------------------------------------------------------------
float Get_Temp_Bolus_Value(pump_setting settings);

// -------------------------------------------------------------------------------------------------------------
/// \brief Runs the pump
///
/// 
///
// -------------------------------------------------------------------------------------------------------------
void Set_Temp_Bolus_Value(pump_setting& settings, const float& value);
